{# This file is part of SGS-Flask.

   SGS-Flask is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
 
   SGS-Flask is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
 
   You should have received a copy of the GNU General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
   Copyright Swallowtail Garden Seeds, Inc 
#}
{# nav needs 2 indents to fit in with page formatting. #}
        <nav>
            <span id="nav_left">
                <span id="nav_home"><a href="{{ url_for('main.index') }}">Index</a></span>
                <ul id="nav_seeds">
                    <li><a href="{{ url_for('seeds.home') }}">Home</a></li>
                    {% set index_map = get_index_map() %}
                    {% for i in index_map %}
                    <li><a href="{{ url_for('seeds.index', idx_slug=index_map[i][1])}}">{{ index_map[i][0] }}</a></li>
                    {% endfor %}
                </ul>
            </span>
            <span id="nav_right">
                <ul id="nav_auth">
                    {% if current_user.is_anonymous %}
                    <li><a href="{{ url_for('auth.login') }}">Log In</a></li>
                    <li><a href="{{ url_for('auth.register') }}">Create an Account</a></li>
                    {% else %}
                    <li><a href="{{ url_for('auth.edit_user') }}">{{ current_user.name }}</a></li>
                    {% if current_user.permissions > 0 %}
                    <li><a href="#nav_manage">Tasks</a></li>
                    {% endif %}
                    <li><a href="{{ url_for('auth.logout') }}">Log Out</a></li>
                    {% endif %}
                </ul>
                {% if not current_user.is_anonymous %}
                {% if current_user.permissions > 0 %}
                <div class="nav_under">
                    <ul id="nav_manage">
                        {% if current_user.can(Permission.MANAGE_USERS) %}
                        <li><a href="{{ url_for('auth.manage_user') }}">Manage Users</a></li>
                        {% endif %}
                        {% if current_user.can(Permission.MANAGE_SEEDS) %}
                        <li><a href="{{ url_for('seeds.manage') }}">Manage Seeds</a></li>
                        {% endif %}
                    </ul>
                </div>
                {% endif %}
                {% endif %}
            </span>
        </nav>

